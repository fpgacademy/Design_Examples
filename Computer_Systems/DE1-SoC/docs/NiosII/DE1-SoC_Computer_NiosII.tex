% This include all the settings that we should use for the document
\newcommand{\PDFTitle}{DE1-SoC Computer System with Nios\textsuperscript{\textregistered} II Manual}
\newcommand{\commonPath}{../../../common/doc}
\newcommand{\templatePath}{../../../common/templates}
\newcommand{\sampleProgramsPath}{../../../sample_programs}
\input{\templatePath/defaulttext.tex}
\input{\templatePath/preamble.tex}

%%%%%%%%%%%%%%%%%%%%%%%%%
% Add title
\newcommand{\doctitle}{DE1-SoC Computer System\\ with Nios\textsuperscript{\textregistered} II}
\newcommand{\dochead}{DE1-SoC Computer System with Nios\textsuperscript{\textregistered} II}
% Usually no need to change these two lines
\title{\fontfamily{phv}\selectfont{\doctitle} }
\chead{ \small{\textsc{\bfseries \dochead} } }
% Customizations
\newcommand{\DEBoard}{DE1-SoC}
\newcommand{\systemName}{DE1-SoC Computer}
\newcommand{\systemNameFull}{DE1-SoC Computer with Nios~II}
\newcommand{\FPGADeviceFamily}{Cyclone\textsuperscript{\textregistered} V SoC}
\newcommand{\processor}{Nios~II}
\newcommand{\aProcessor}{a Nios~II}
\newcommand{\baseAddressOffset}{0}
\newcommand{\GIC}{processor}
\newcommand{\videoOutDevice}{VGA}
\newcommand{\pixelBufferInfo}{320240_16}
\newcommand{\expansionPortA}{JP1}
\newcommand{\expansionPortB}{JP2}
\newcommand{\processorStyle}{defaultNiosStyle}
\newcommand{\processorLower}{nios2}
\raggedbottom
\widowpenalty 10000
\clubpenalty 10000
%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{document}
\begin{table}
    \centering
    \begin{tabular}{p{5cm}p{4cm}}
        \hspace{-3cm}
        &
        \raisebox{1\height}{\parbox[h]{0.5\textwidth}{\Large\fontfamily{phv}\selectfont{\textbf{\doctitle}}}}
    \end{tabular}
    \label{tab:logo}
\end{table}

\colorbox[rgb]{0,0.384,0.816}{\parbox[h]{\textwidth}{\color{white}\textbf{\textit{\textBar}}}}

\thispagestyle{plain}

% Section: Introduction
\input{\commonPath/Introduction.tex}
To support such experiments, the system contains
embedded processors, memory, audio and video devices, and some simple I/O peripherals. 
The FPGA programming file that implements this system, as well as its 
design source files, can be obtained from the FPGAcademy's Design Example GitHub repository.

% Section: Contents
\input{\commonPath/Contents_FPGA_HPS.tex}
\input{\commonPath/Block_Diagram_Old.tex}

\input{\commonPath/FPGA_NiosII.tex}
\input{\commonPath/FPGA_NiosII_Extended.tex}

\subsection{Memory Components}

The \systemName~has DDR3 and SDRAM ports, as well as two memory modules implemented 
using the on-chip memory inside the FPGA. These memories are described below.

\input{\commonPath/FPGA_SDRAM.tex}
\input{\commonPath/FPGA_DDR3.tex}
\input{\commonPath/FPGA_OnChip_Memory.tex}
\input{\commonPath/FPGA_Char_Buffer.tex}

\input{\commonPath/FPGA_PP.tex}
\input{\commonPath/FPGA_PP_Red_LEDs_10.tex}
\input{\commonPath/FPGA_PP_7_Segs_6.tex}
\input{\commonPath/FPGA_PP_Switches_10.tex}
\input{\commonPath/FPGA_PP_Keys_4.tex}
\input{\commonPath/FPGA_PP_Dual_40_Pin_Headers.tex}
\input{\commonPath/FPGA_PP_Examples.tex}

\input{\commonPath/FPGA_JTAG_UART.tex}

\input{\commonPath/FPGA_Interval_Timers.tex}
Each Nios II processor has exclusive access to two interval timers.
\input{\commonPath/FPGA_HPS_GSensor.tex}
\input{\commonPath/FPGA_FP.tex}
\input{\commonPath/FPGA_System_ID.tex}

% Section: Exceptions and Interrupts
\input{\commonPath/Interrupts_FPGA.tex}

\begin{table}[h]
    \begin{center}
    \begin{tabular}{l|l}
            \textbf{I/O Peripheral} &
            \textbf{IRQ \#}
        \\\hline
            Interval timer & 0
        \\
            Pushbutton switch parallel port & 1
        \\
            Second Interval timer & 2
        \\
            Audio port & 6
        \\
            PS/2 port & 7
        \\
            JTAG port & 8
        \\
						IrDA port & 9
				\\
            Serial port & 10
        \\
            JP1 Expansion parallel port & 11
        \\
            JP2 Expansion parallel port & 12
        \\
						PS/2 port dual & 23
				\\
    \end{tabular}
    \caption{Hardware IRQ interrupt assignment for the DE1-SoC Computer.}
	 \label{tab:irq}
    \end{center}
\end{table}
\newpage

\input{\commonPath/Interrupts_FPGA_PP.tex}
\input{\commonPath/Interrupts_FPGA_PP_Keys.tex}
\input{\commonPath/Interrupts_FPGA_JTAG_UART.tex}
\input{\commonPath/Interrupts_FPGA_Interval_Timer.tex}

\input{\commonPath/Interrupts_NiosII_ASM.tex}
\input{\commonPath/Interrupts_NiosII_C.tex}

% Section: Media Components
\section{Media Components}
\label{sec:multi}

This section describes the audio in/out, video-out, video-in, PS/2, IrDA*, and ADC ports.

\input{\commonPath/Media_FPGA_Audio.tex}
\input{\commonPath/Media_FPGA_Video_Out.tex}

\input{\commonPath/Media_FPGA_Video_In.tex}
\input{\commonPath/Media_FPGA_AV_Config.tex}
\input{\commonPath/Media_FPGA_PS2.tex}
\input{\commonPath/Media_FPGA_IrDA_Serial.tex}
\input{\commonPath/FPGA_ADC.tex}

% Section: Modifying the System
\input{\commonPath/System_Modifying.tex}
\begin{table}[h]
    \begin{center}
    \begin{tabular}{l|l}
            \textbf{I/O Peripheral}
            & \textbf{Qsys Core}
        \\\hline
            SDRAM
            & SDRAM Controller
        \\
            SRAM
        &   SRAM Controller
        \\
            On-chip memory character buffer
				& Character Buffer for VGA Display
        \\
            SD Card
        &   SD Card Interface
        \\
            Flash
        &   Flash Memory IP Core
        \\
            Red LED parallel port
				& Parallel Port
        \\
            7-segment displays parallel port
				& Parallel Port
        \\
            Expansion parallel ports
				& Parallel Port
        \\
            Slider switch parallel port
				& Parallel Port
        \\
            Pushbutton parallel port
				& Parallel Port
        \\
            PS/2 port
				& PS2 Controller
        \\
            JTAG port
				& JTAG UART
        \\
            Serial port
				& RS232 UART
        \\
            IrDA port
				& IrDA UART
        \\
            Interval timer
				& Interval timer 
        \\
            System ID
				& System ID Peripheral
        \\
            Audio/video configuration port
				& Audio and Video Config
        \\
            Audio port
				& Audio
        \\
            Video port
				& Pixel Buffer DMA Controller
        \\
            Video In port
				& DMA Controller
        \\
    \end{tabular}
    \caption{Qsys cores used in the \systemName.}
    \label{tab:sopcnames}
    \end{center}
\end{table}
\clearpage

% Section: Making the System the Default Configuration
\input{\commonPath/System_Default_Config.tex}

\section{Memory Layout}

\noindent
Table \ref{tab:memorylayout} summarizes the memory map used in the \systemName.
~\\
~\\

\begin{table}[h]
    \begin{center}
    \begin{tabular}{c|c|l}
            \textbf{Base Address}
            & \textbf{End Address}
            & \textbf{I/O Peripheral}
				\\\hline\vspace{-3mm}\\
            0x00000000
            & 0x03FFFFFF
            & SDRAM
        \\
            0x08000000
            & 0x0803FFFF
            & FPGA On-chip Memory
        \\
            0x09000000
            & 0x09001FFF
            & FPGA On-chip Memory Character Buffer
        \\
            0x40000000
            & 0x7FFFFFFF
            & DDR3 Memory
        \\
            0xFF200000
            & 0xFF20000F
            & Red LEDs
        \\
            0xFF200020
            & 0xFF20002F
            & 7-segment HEX3$-$HEX0 Displays
        \\
            0xFF200030
            & 0xFF20003F
            & 7-segment HEX5$-$HEX4 Displays

        \\
            0xFF200040
            & 0xFF20004F
            & Slider Switches
        \\
            0xFF200050
            & 0xFF20005F
            & Pushbutton KEYs
        \\
            0xFF200060
            & 0xFF20006F
            & JP1 Expansion
        \\
            0xFF200070
            & 0xFF20007F
            & JP2 Expansion
        \\
            0xFF200100
            & 0xFF200107
            & PS/2
        \\
            0xFF200108
            & 0xFF20010F
            & PS/2 Dual
        \\
            0xFF201000
            & 0xFF201007
            & JTAG UART
        \\
            0xFF201020
            & 0xFF201027
				& Infrared (IrDA)
        \\
            0xFF202000
            & 0xFF20201F
            & Interval Timer
        \\
            0xFF202020
            & 0xFF20202F
            & Second Interval Timer
        \\
            0xFF203000
            & 0xFF20301F
            & Audio/video Configuration
        \\
            0xFF203020
            & 0xFF20302F
            & Pixel Buffer Control
        \\
            0xFF203030
            & 0xFF203037
            & Character Buffer Control
        \\
            0xFF203040
            & 0xFF20304F
            & Audio
        \\
            0xFF203060
            & 0xFF203070
            & Video-in
        \\
            0xFF204000
            & 0xFF20401F
            & ADC
        \\
            0xFFC04000
            & 0xFFC040FC
            & HPS I2C0
        \\
    \end{tabular}
    \caption{Memory layout used in the \systemName.}
    \label{tab:memorylayout}
    \end{center}
\end{table}

% Section: AMP Integration
\input{\commonPath/AMP_Integration.tex}
\clearpage

% Appendix
\input{\commonPath/appendix.tex}
\input{\commonPath/Code_FPGA_PP_Examples.tex}
\input{\commonPath/Code_FPGA_JTAG_UART.tex}
\input{\commonPath/Code_Interrupts_NiosII.tex}
\input{\commonPath/Code_Media_FPGA_Audio.tex}
\input{\commonPath/Code_Media_FPGA_Video_Out.tex}
\input{\commonPath/Code_Media_FPGA_PS2.tex}
\input{\commonPath/Code_Media_FPGA_FP.tex}

\input{\templatePath/copyright.tex}

\end{document}

